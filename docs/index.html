<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>üéµ Musiques IA ‚Äì √âcoute libre</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/wavesurfer.js"></script>
</head>
<body>
<header>
    <h1>St Vince</h1>
    <p>A collection of original pieces, composed by a human with passion and the help of artificial intelligence - a musical reflection on climate change, free to listen and to feel.</p>

    <div class="quality-switch">
        <label class="switch">
            <input type="checkbox" id="toggle-quality">
            <span class="slider"></span>
        </label>
        <span id="quality-label">Qualit√© Web</span>
    </div>

</header>

<main>
    <section class="track" data-audio="assets/audio/mp3/Frozen.Echoes.mp3">
        <div class="cover-container">
            <img src="assets/covers/Frozen.Echoes.png" alt="Frozen Echoes" class="cover" />
            <div class="icon-overlay play"></div>
        </div>
        <div class="info">
            <h2>Frozen Echoes</h2>
            <p><strong>‚ÄúFrozen Echoes‚Äù</strong> is a sonic tribute to polar landscapes and the ghostly fauna of our world.</p>
            <p>It is a music of space, silence, and remembrance.<br>
                It speaks to the soul of those who still know how to listen to the cold.</p>

            <div class="waveform"></div>
        </div>
    </section>

    <section class="track" data-audio="assets/audio/mp3/Dawn.of.the.Wild.mp3">
        <div class="cover-container">
            <img src="assets/covers/Dawn.of.the.Wild.png" alt="Dawn of the Wild" class="cover" />
            <div class="icon-overlay play"></div>
        </div>        <div class="info">
            <h2>Dawn of the Wild</h2>
            <p><strong>‚ÄúDawn of the Wild‚Äù</strong> is a musical ode to the forest awakening from its long slumber. Written for piano, violin, and cello, it captures the hush before the first light, when the earth exhales and life stirs again.</p>
            <p>Amidst the moss and morning mist, a lone stag stands still ‚Äî guardian of the rebirth, witness to the breath of spring returning.</p>
            <p>This is a music of renewal and quiet strength, where each note carries the scent of damp leaves, the promise of blooming, the pulse of life reborn.<br>
                It speaks to the heart of those who still know how to listen to the woods.</p>

            <div class="waveform"></div>
        </div>
    </section>

    <section class="track" data-audio="assets/audio/mp3/Wings.Over.the.Fire.mp3">
        <div class="cover-container">
            <img src="assets/covers/Wings.Over.the.Fire.png" alt="Wings Over the Fire" class="cover" />
            <div class="icon-overlay play"></div>
        </div>
        <div class="info">
            <h2>Wings Over the Fire</h2>
            <p><strong>‚ÄúWings Over the Fire‚Äù</strong> is a sonic journey through destruction and grace.</p>
            <p>Composed for piano, violin, and cello, this album tells the story of a burning forest seen not from within the flames, but from above ‚Äî from the steady, gliding perspective of an eagle in flight.</p>
            <p>Each piece evokes the fragility of life, the violence of collapse, and the strange serenity that exists at a distance from catastrophe.<br>
                It is a music of soaring lines and trembling textures, of embers and silence, of grief and dignity.</p>
            <p>This is not a lament ‚Äî but a vigil.</p>

            <div class="waveform"></div>
        </div>
    </section>


    <section class="track" data-audio="assets/audio/mp3/Dust.and.Silence.mp3">
        <div class="cover-container">
            <img src="assets/covers/Dust.and.Silence.png" alt="Dust and Silence" class="cover" />
            <div class="icon-overlay play"></div>
        </div>
        <div class="info">
            <h2>Dust and Silence</h2>
            <p><strong>‚ÄúDust and Silence‚Äù</strong> is a solitary piano ballad that drifts across forgotten lands and fading memories. Each note falls like a footstep in the dust ‚Äî soft, uncertain, and slow.</p>
            <p>This is music for the spaces in between, where absence speaks louder than presence, and where melancholy becomes a gentle companion to the wandering soul.</p>

            <div class="waveform"></div>
        </div>
    </section>

</main>


<footer>
    <p>&copy; 2025 Vincent Lagny ‚Äì Version 1.14 - Musiques IA ‚Äì Licence CC BY-NC-SA 4.0</p>
</footer>

<script>
    const tracks = document.querySelectorAll('.track');
    let currentPlaying = null;
    let isHiFi = false;
    const qualitySwitch = document.getElementById('toggle-quality');
    const qualityLabel = document.getElementById('quality-label');
    const players = [];

    // Initialisation de chaque lecteur
    tracks.forEach((track) => {
        const container = track.querySelector('.waveform');
        const coverContainer = track.querySelector('.cover-container');
        const iconOverlay = track.querySelector('.icon-overlay');
        const baseFilename = track.getAttribute('data-audio')
            .replace(/^assets\/audio\/mp3\//, '')
            .replace(/\.mp3$/, '');

        let currentFormat = 'mp3';
        const ws = WaveSurfer.create({
            container,
            waveColor: '#999',
            progressColor: '#ff7b54',
            height: 80,
            responsive: true,
            barWidth: 2,
            cursorColor: '#fff'
        });

        ws.load(`assets/audio/${currentFormat}/${baseFilename}.${currentFormat}`);

        coverContainer.addEventListener('click', () => {
            if (currentPlaying && currentPlaying !== ws) {
                currentPlaying.pause();
            }
            ws.playPause();
            if (ws.isPlaying()) {
                currentPlaying = ws;
            }
        });

        ws.on('play', () => {
            iconOverlay.classList.remove('play');
            iconOverlay.classList.add('pause');
        });

        ws.on('pause', () => {
            iconOverlay.classList.remove('pause');
            iconOverlay.classList.add('play');
        });

        ws.on('finish', () => {
            iconOverlay.classList.remove('pause');
            iconOverlay.classList.add('play');
            currentPlaying = null;
        });

        players.push({
            wavesurfer: ws,
            baseFilename,
            container,
            iconOverlay,
            currentFormat
        });
    });

    // Bascule entre mp3 / wav
    qualitySwitch.addEventListener('change', () => {
        isHiFi = qualitySwitch.checked;
        qualityLabel.textContent = isHiFi ? 'Qualit√© HiFi' : 'Qualit√© Web';

        let currentTime = 0;
        let resumeFilename = null;

        players.forEach((player, i) => {
            const { wavesurfer, container, baseFilename, iconOverlay } = player;
            const wasPlaying = wavesurfer.isPlaying();
            if (wasPlaying) {
                currentTime = wavesurfer.getCurrentTime();
                resumeFilename = baseFilename;
            }

            wavesurfer.destroy();

            const newFormat = isHiFi ? 'wav' : 'mp3';
            const newWs = WaveSurfer.create({
                container,
                waveColor: '#999',
                progressColor: '#ff7b54',
                height: 80,
                responsive: true,
                barWidth: 2,
                cursorColor: '#fff'
            });

            const filePath = `assets/audio/${newFormat}/${baseFilename}.${newFormat}`;
            newWs.load(filePath);

            newWs.on('ready', () => {
                if (wasPlaying && resumeFilename === baseFilename) {
                    newWs.setCurrentTime(currentTime);
                    newWs.play();
                    currentPlaying = newWs;
                }
            });

            newWs.on('play', () => {
                iconOverlay.classList.remove('play');
                iconOverlay.classList.add('pause');
            });

            newWs.on('pause', () => {
                iconOverlay.classList.remove('pause');
                iconOverlay.classList.add('play');
            });

            newWs.on('finish', () => {
                iconOverlay.classList.remove('pause');
                iconOverlay.classList.add('play');
                currentPlaying = null;
            });

            players[i].wavesurfer = newWs;
            players[i].currentFormat = newFormat;
        });
    });
</script>




<!-- Default Statcounter code for Music https://vincentlagny.github.io/music/
-->
<script type="text/javascript">
    var sc_project=13153336;
    var sc_invisible=1;
    var sc_security="eef9a721";
</script>
<script type="text/javascript"
        src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
                                      href="https://statcounter.com/" target="_blank"><img class="statcounter"
                                                                                           src="https://c.statcounter.com/13153336/0/eef9a721/1/" alt="Web Analytics"
                                                                                           referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->




</body>
</html>
